$(function(){function a(a,b){var c=$(a).text().trim(),d=c.split(" ");return a=d.splice(0,b).join(" "),d.length>b&&(a+="..."),a}var b=$(document),c=$(window),d=$("header.site-header"),e=$("#site-menu-mobile"),f=($("[data-animate]"),$(".carousel")),g=($(".tabs"),".equalize"),h=$("#prodListing"),i="grid",j=$(".price-slider"),k="",l="",m="",n="",o=$("#filtersDrawer");Vue.filter("truncateWords",function(b,c){return a(b,c)}),Vue.filter("moneyFormat",function(a){var a=Shopify.formatMoney(a);return a}),Vue.filter("textFormat",function(a){var a=a.split("-").join(" ");return a}),Vue.config.delimiters=["#{","}"];var p=new Vue({el:"#app",data:{cart:[],product:[],filters:[],itemLimitOrder:""},ready:function(){this.getCartData(),this.initBootstrapComponents(),this.initLayout(),this.initToasterNotifications(),this.initSmoothScrolling(),this.initOffCanvasMenu(),this.initSliders(),this.initLightBox(),$("section.collection").hasClass("collection-filters")&&this.initCollection(),this.backgroundParallax()},methods:{initBootstrapComponents:function(){function a(){$("#mini-cart-toggle").parent().removeClass("open"),$("#mini-cart-toggle").attr("aria-expanded","false")}d.on("affix.bs.affix, affix-top.bs.affix",function(){$("body:not(.template-index) #app").css("padding-top",d.outerHeight())}),$(".header-autohide").autoHidingNavbar(),$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover(),c.on("activate.bs.scrollspy",function(a){var b,c;return b=$("a[href^='#']",a.target).attr("href").replace(/^#/,""),c=$("#"+b),c.length&&c.attr("id",""),document.location.hash=b,c.length?c.attr("id",b):void 0}),b.on("scroll",function(b){a()}),$("#site-menu li.dropdown").hover(function(){a()})},initLayout:function(){function a(a,b,c){$(a).on("click",function(){d&&$("html, body").animate({scrollTop:0},{duration:1e3,start:function(){d=!1},complete:function(){d=!0}});var a=$(".icon-cart"),e=$(this).closest(b).find(c);e&&e.clone().offset({top:e.offset().top,left:e.offset().left}).css({opacity:".9",position:"absolute",height:$(c).height()-100,width:$(c).width()-100,"z-index":"100"}).appendTo($("body")).addClass("effect-img-cart").empty().animate({top:a.offset().top+10,left:a.offset().left+20,width:20,height:20},2e3,function(){$(this).detach()})})}$(g).matchHeight(),$('[data-parallax="true"]').each(function(){function a(){var a=c.scrollTop()/d,e="center "+a+"px";b.css("background-position",e)}var b=$(this),d=b.attr("data-parallax-speed");d||(d=5),b.css("background-attachment","fixed!important"),c.scroll(function(){a()}),a()}),$(".search-toggle").on("click",function(){var a=$(".search-mobile");a.is(":visible")?a.addClass("hidden"):a.removeClass("hidden")}),$("#offcanvas-close").on("click",function(){var a=$(".search-mobile");a.is(":visible")?a.addClass("hidden"):a.removeClass("hidden")}),$(document).on("click",".product-rating",function(){var a="#reviews";return $(a).collapse("show"),$("html,body").animate({scrollTop:$(a).offset().top-60},1200,"easeInOutExpo"),!1}),$(".free-shipping").parallax();var b=window.location.pathname;"/blogs/news"==b&&$(".current-tags").hide(),$('.text-red span:contains("OK For Kids"), h1.text-red, a.icon-link.text-red span').each(function(){$(this).html('OK <mark style="color:#a5ca27">For</mark> <mark style="color:#56bbb9">Kids</mark><sup>TM</sup>')}),$('.details h3 span:contains("OK For Kids"), .breadcrumb li:contains("OK For Kids")').each(function(){$(this).html("OK For Kids<sup>TM</sup>")}),$("#btnSubmit").click(function(){var a=$("#password").val(),b=$("#confirm_password").val();return a!=b?($(".registerpass").hasClass("error-pass")||($(".registerpass").addClass("error-pass"),$(".confirmpass, .registerpass").after("<p class='error-text-confirm'style='color:red;'>Passwords do not match.</p>")),!1):($(".registerpass").removeClass("error-pass"),$(".error-text-confirm").remove(),!0)});var d=!0;a("#addToCart",".shappify_add_to_cart_form",".carousel-main .is-selected"),a(".add-to-cart",".grid-view",".product-image img");var e=$(".shappify_add_to_cart_form"),f=!1;e.submit(function(a){var b=!1;a.preventDefault(),$("#addToCart").attr("disabled",!0),$(".loadgif").removeClass("hidden"),$(".cart-btn-img").addClass("hidden"),$(".cart-btn-text").html("Adding...");var c=!1;$(".shappify_option").each(function(){$(this).siblings(".required").length&&(c=!0)}),$(".shappify_option_value select option:selected").each(function(){""===$(this).val()&&c&&($("#addToCart").attr("disabled",!1),$(".loadgif").addClass("hidden"),$("html,body").stop(),$(".effect-img-cart").remove(),$(".cart-btn-img").removeClass("hidden"),$(".cart-btn-text").html("Add to cart"),d=!0,setTimeout(function(){$("html, body").animate({scrollTop:$(".validation_error:first").offset().top},1e3)},800),b=!0)}),setTimeout(function(){f||b||(f=!0,$.ajax({type:e.attr("method"),url:e.attr("action")+".js",data:e.serialize(),dataType:"json",success:function(){},error:function(){}}).done(function(a){f=!1,$.get("/cart.json",function(a){$("#counter").html(a.item_count),$(".loadgif").addClass("hidden"),$("#addToCart").attr("disabled",!1),$(".cart-btn-img").removeClass("hidden"),$(".cart-btn-text").html("Add to cart"),e.push({name:"attributes[cart_exists]",value:!0})})}))},1e3)}),$(".birthday-select select").change(function(){$(".birthday-select select option:selected").each(function(){$(this).is(":selected")?$("#bcustomer-day, #bcustomer-month").prop("required",!0):$("#bcustomer-day, #bcustomer-month").prop("required",!1)})}),$("body").on("change","#if-opt-out",function(){$(this).is(":checked")?($("#bcustomer-day, #bcustomer-month").prop("required",!0),$("#enddate").prop("required",!0)):($("#enddate").prop("required",!1),$("#bcustomer-day, #bcustomer-month").prop("required",!1))}),$("#if-opt-out").change(),$("body").on("change","#bcustomer-day, #bcustomer-month",function(){var a=$("#bcustomer-day").val(),b=$("#bcustomer-month").val();$("#enddate").val(b+"/"+a)}),setTimeout(function(){$(".spr-summary-caption").length||$(".disclaimer").hide()},1e3),$(document).on("click",".reports",function(){var a=$(this).find("a").attr("href");return window.open(a),!1})},initQuickview:function(b){var c=$(b.currentTarget).attr("data-handle");$("body").addClass("loading"),this.$http.get("/products/"+c+".js").then(function(b){200==b.status&&($("body").removeClass("loading"),p.$set("product",b.data),$.magnificPopup.open({items:{src:"#quickview-template"},type:"inline",removalDelay:500,fixedBgPos:!0,autoFocusLast:!1,callbacks:{beforeOpen:function(b){new Shopify.OptionSelectors("quickview-product-select",{product:p.product,onVariantSelected:selectCallbackQuickview}),1==p.product.options.length&&"Title"==p.product.options[0].name&&$("#quickview-product-options").hide(),1==p.product.options.length&&"Title"!=p.product.options[0].name&&$("#quickview-product-options .selector-wrapper:eq(0)").prepend("<label>"+p.product.options[0].name+": </label>"),p.product.variants.length>1&&($("#quickview-template .product-options").show(),$("#quickview-template .selector-wrapper label").each(function(a){$(this).html(p.product.options[a].name+": ")})),$("#quickview-template .single-option-selector").addClass("form-control"),$("#product-desc").html(a(p.product.description,20)),setTimeout(function(){$(".quickview-carousel").flickity({cellSelector:".carousel-cell",contain:!0,setGallerySize:!1,pageDots:!0,prevNextButtons:!0,wrapAround:!0,selectedAttraction:.04,friction:.3})},10)},afterClose:function(){$(".quickview-carousel").flickity("destroy"),$("#quickview-product-options .selector-wrapper").remove(),$("#quickview-template .qty-value").val(1)}}}))})},changeBlog:function(a){var b=$(a.currentTarget).val();window.location=b},getCartData:function(a){this.$http.get("/cart.js").then(function(a){p.$set("cart",a.data)})},getCartItemQty:function(a){var b=this.cart.items,c="";return $.each(b,function(d,e){b[d].variant_id==a&&(c=b[d].quantity)}),c},checkItemLimitOrder:function(a,b,c){this.$http.get("/products/"+a+".js").then(function(a){var d=a.data.variants;$.each(d,function(a,e){if(d[a].id==b){var f=d[a].inventory_management,g=d[a].inventory_policy,h=d[a].inventory_quantity;c>h&&"deny"==g&&"shopify"==f?p.$set("itemLimitOrder",!0):p.$set("itemLimitOrder",!1)}})})},updateQty:function(a){var b=$(a.currentTarget).parents().closest(".quantity").find(".qty-value"),c=b.val();if($(a.currentTarget).hasClass("minus")){if(parseFloat(c)>=2){var d=parseFloat(c)-1;b.val(d)}}else if($(a.currentTarget).hasClass("plus")){var d=parseFloat(c)+1;b.val(d)}},checkItemVariant:function(a){var b=$(a.currentTarget).attr("name"),c=$(a.currentTarget).val();$("#add-to-cart-"+b).attr("data-id",c),""!=c?$("#add-to-cart-"+b).removeClass("disabled"):$("#add-to-cart-"+b).addClass("disabled")},updateCart:function(a,b){var c=b+1,d=$(a.currentTarget).attr("data-event"),e=$(a.currentTarget).attr("data-notify");if($("body").addClass("loading"),"add"==d){var f=$(a.currentTarget).attr("data-id"),g=$(a.currentTarget).attr("data-handle"),h=$(".qty-value").val(),i=$(a.currentTarget).attr("data-inventory-management"),j=$(a.currentTarget).attr("data-inventory-policy"),k=$(a.currentTarget).attr("data-inventory-qty"),l=this.getCartItemQty(f),m=k-l,n=$(a.currentTarget).val();if(h>m&&"deny"==j&&"shopify"==i)return $("body").removeClass("loading"),toastr.warning("The selected quantity exceeds quantity available in stock ("+k+" items).","CART"),void $(".qty-value").val(1);$("#addToCart").val("Please Wait"),this.$http.post("/cart/add.js",{quantity:h,id:f}).then(function(a){p.getCartData(),$("body").removeClass("loading"),$("#addToCart").val(n)},function(a){$("body").removeClass("loading"),void 0==f?toastr.warning("Please select an option","CART"):toastr.error("Cart cannot be updated","CART")})}if("update"==d){var f=$(a.currentTarget).parent().closest(".cart-item").attr("data-id"),g=$(a.currentTarget).parent().closest(".cart-item").attr("data-handle"),h=$(a.currentTarget).parents().closest(".quantity").find(".qty-value").val();if($(a.currentTarget).hasClass("minus")){if(parseFloat(h)>=0)var o=parseFloat(h)-1}else if($(a.currentTarget).hasClass("plus"))var o=parseFloat(h)+1;else var o=parseFloat(h);p.checkItemLimitOrder(g,f,o),this.$http.post("/cart/change.js",{quantity:o,line:c}).then(function(a){p.getCartData(),$("body").removeClass("loading"),1==p.itemLimitOrder?toastr.warning("The selected quantity exceeds quantity available in stock.","CART"):"true"==e&&toastr.success("Cart updated","CART")},function(a){$("body").removeClass("loading"),toastr.error("Cart cannot be updated","CART")})}if("remove"==d){var f=$(a.currentTarget).attr("data-id");this.$http.post("/cart/change.js",{quantity:0,id:f}).then(function(a){$("body").removeClass("loading"),p.$set("cart",a.data),"true"==e&&toastr.success("Cart updated","CART")},function(a){$("body").removeClass("loading"),toastr.error("Cart cannot be updated","CART")})}},initToasterNotifications:function(){toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"2500",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}},initSmoothScrolling:function(){$("a[href*=\\#]:not([data-toggle]):not([data-rel])").on("click",function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var a=$(this.hash),b=130;if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return("#intro"==a.selector||"#top"==a.selctor)&&(b=0),$("html,body").animate({scrollTop:a.offset().top-b},1200,"easeInOutExpo"),!1}})},initOffCanvasMenu:function(){e.mmenu({offCanvas:{},navbars:{add:!0,position:"top"},extensions:["popup","border-full","theme-white"]});var a=e.data("mmenu");$("#offcanvas-toggle").click(function(b){$(this).hasClass("is-active")?a.close():a.open()}),$("#offcanvas-close").click(function(b){a.close()}),a.bind("open",function(a){$("#offcanvas-toggle").addClass("is-active"),$(".panel-actions").removeClass("hidden")}),a.bind("close",function(a){$("#offcanvas-toggle").removeClass("is-active"),$(".panel-actions").addClass("hidden"),$("#search-form.collapse").collapse("hide")}),$("#search-form.collapse").on("show.bs.collapse",function(){$("#site-menu-mobile").addClass("search-is-open")}),$("#search-form.collapse").on("hide.bs.collapse",function(){$("#site-menu-mobile").removeClass("search-is-open")})},initSliders:function(){var a=$("body").width(),b=$(".section-hero .img-responsive").outerHeight(),d=$(".blog-index .col-sm-4 .entry").outerHeight();$(".flickity-viewport").outerHeight();$(".blog-carousel").css("height",d),750>=a?$(".section-hero .carousel").css("height",b):$(".section-hero .carousel").removeAttr("style"),c.resize(function(a){var b=$("body").width(),c=$(".section-hero .img-responsive").outerHeight(),d=$(".blog-index .col-sm-4 .entry").outerHeight();$(".blog-carousel").css("height",d),750>=b?$(".section-hero .carousel").css("height",c):$(".section-hero .carousel").removeAttr("style")});var e=function(){var a=0;$(".section-hero .carousel .carousel-cell").find("img").each(function(){var b=$(this).height();b>a&&(a=b)}),$(".section-hero .carousel").css("height",a+"px"),$(".section-hero .carousel .flickity-viewport").css("height",a+"px")};c.resize(function(a){e()}),e(),f.length>0&&f.each(function(a){function b(){var a=$(this).data("flickity"),b=a.selectedElement,c=$(b),d=$(b).attr("data-animation"),e=c.find(".caption-container"),f=c.find("video");d&&$(".caption-item").each(function(a,b){$(this).addClass("animated collapse _"+a)}),0!=e.length&&($(".caption-container .animated").fadeOut(),c.find(".animated").show().addClass(d)),0!=f.length&&f[0].play()}var c=$(this),d=c.attr("data-gallery-size"),e=c.attr("data-align"),f=c.attr("data-dots"),g=c.attr("data-arrows"),h=c.attr("data-freescroll"),i=c.attr("data-autoplay"),j=c.attr("data-endless"),k=c.attr("data-nav"),l=c.find(".carousel-cell");e||(e="center"),d=d&&"true"!=d?!1:!0,f=f&&"false"!=f?!0:!1,g=g&&"false"!=g?!0:!1,j=j&&"false"!=j?!0:!1,h=h&&"false"!=h?!0:!1,i&&"false"!=i||(i=!1),f=f&&"false"!=f?!0:!1,c.flickity({cellSelector:".carousel-cell",contain:!0,cellAlign:e,setGallerySize:d,pageDots:f,prevNextButtons:g,wrapAround:j,asNavFor:k,freeScroll:h,autoPlay:i,pauseAutoPlayOnHover:!0,imagesLoaded:!1,lazyLoad:!1,selectedAttraction:.04,friction:.3,arrowShape:{x0:10,x1:60,y1:50,x2:65,y2:45,x3:20}}),l.length<2&&c.addClass("hide-nav-ui"),c.on("cellSelect",b),c.flickity("select",0)});var g=$(".carousel-main");g.flickity({pageDots:!1});var h=$(".group-thumb");h.find(".thumb");h.on("click",".thumb",function(){var a=$(this).index();g.flickity("select",a)}),$(".thumb .thumb-img").on("click",function(){$(".thumb .thumb-img").removeClass("is-selected"),$(this).addClass("is-selected")});var i=f.data("flickity");$(".carousel-main").on("select.flickity",function(){var a=i.selectedIndex;$(".thumb-img").each(function(b){var c=b;a==c&&($(".thumb-img").removeClass("is-selected"),$(this).addClass("is-selected"))})});var j=function(){var a=0;$(".hero-blog-slider .carousel .carousel-cell").find("img").each(function(){var b=$(this).height();b>a&&(a=b)}),$(".hero-blog-slider .carousel").css("height",a+"px"),$(".hero-blog-slider .carousel .flickity-viewport").css("height",a+"px")};c.resize(function(a){j()}),j(),setTimeout(function(){var a=$(".section-blog  .img-responsive").outerHeight();$(".section-blog .flickity-viewport").css("height",a),c.resize(function(a){var b=$(".section-blog  .img-responsive").outerHeight();$(".section-blog .flickity-viewport").css("height",b)}),j()},1e3)},initLightBox:function(){$(".product-gallery a").magnificPopup({type:"image",gallery:{enabled:!0,arrowMarkup:'<span title="%title%" class="mfp-arrow mfp-arrow-%dir%"><i class="fa fa-angle-%dir% mfp-prevent-close"></i></span>'},removalDelay:500})},initInfiniteScrolling:function(){$(".btn-loading").on("click",function(a){a.preventDefault();var b=$(this),c=$(this).attr("href"),d=$(this).attr("data-total-pages"),e=c.substr(c.indexOf("#"));$.ajax({type:"GET",url:c,dataType:"html",beforeSend:function(){b.addClass("inprogress"),$("body").addClass("loading")},success:function(a){$("body").removeClass("loading"),b.removeClass("inprogress").blur();var c=$(a).find(".infinite-scroll .dataset").html(),f=$(a).find(".infinite-scroll .btn-loading").attr("href");$("#new-posts-wrapper").append(c),b.prop("href",f),e==d&&(b.fadeOut(),setTimeout(function(){$(".no-posts-message").fadeIn()},1e3))}})})},initCollection:function(){var a="*",b="price:asc",c=getCollectionTags();this.$set("filters",c),l=this.filters[4].minPrice,m=this.filters[4].maxPrice,j.ionRangeSlider({type:"double",min:l,max:m,step:1,prefix:"$",force_edges:!0,prettify_enabled:!0,prettify_separator:",",onFinish:function(a){p.parseFilters()}}),k=j.data("ionRangeSlider"),h.mixItUp({load:{filter:a,sort:b,page:1},layout:{containerClass:"grid"},controls:{enable:!0},pagination:{limit:12,loop:!1,generatePagers:!0,maxPagers:5,prevButtonHTML:'<span class="fa fa-angle-left"></span>',nextButtonHTML:'<span class="fa fa-angle-right"></span>'},callbacks:{onMixFail:function(a){$("#alert-msg .alert-content").html("No items were found matching the selected filters."),$("#alert-msg").show()},onMixStart:function(a){$("#alert-msg").hide(),$(".grid-view .product-desc").matchHeight()},onMixEnd:function(a){$(".grid-view .product-desc").matchHeight()}}}),o.mmenu({autoHeight:!0,offCanvas:{position:"bottom"},navbar:{title:"Select Filters"},extensions:["pagedim-black"]});var d=o.data("mmenu");$("#toggleFiltersDrawer").click(function(a){d.open()})},parseFilters:function(){var a=[],b=[],c=[],d=j.val().split(";"),e=d[0],f=d[1];$("input:checkbox[name=filters]:checked").each(function(){a.push(this.value)});h.find(".mix").filter(function(){var a=Number($(this).attr("data-price"));a>=e&&f>=a?$(this).addClass("inPriceRange"):$(this).removeClass("inPriceRange")});b.push(".inPriceRange"),c=$.merge(a,b),c=$.unique(c),n="",$.each(c,function(a,b){n+=b}),h.mixItUp("isLoaded")&&h.mixItUp("filter",n)},resetFilters:function(){$("input:checkbox[name=filters]").attr("checked",!1),k.update({from:l,to:m}),this.parseFilters()},changeLayout:function(a){var b=$(a.target).find("input").attr("id");if("list"==i){if("list-view"==b)return!1;i="grid",$(".list-view").hide(),$("#prodListing").fadeOut(600,function(){$(".grid-view").show(),$("#prodListing").fadeIn()}),h.mixItUp("changeLayout",{containerClass:i})}else{if("grid-view"==b)return!1;i="list",$(".grid-view").hide(),$("#prodListing").fadeOut(600,function(){$(".list-view").show(),$("#prodListing").fadeIn()}),h.mixItUp("changeLayout",{containerClass:i})}},collectionSort:function(a){var b=$(a.target).val();h.mixItUp("sort",b)},backgroundParallax:function(){var a=0,b=window.innerWidth,c=0,d=$("section.oils").position(),e=$("section.free-shipping").position(),f=0,g=function(){a=window.innerHeight};g(),$(window).resize(function(){b>991&&g()}),$(window).scroll(function(){b>991&&scrollHandler()}),scrollHandler=function(){var b=$(".oils-parallax .inner-oils"),g=$(".parrot");if(c=$(window).scrollTop(),$("body").hasClass("template-index")){if(c+a>d.top){var h=.2*(d.top-c);600>=h&&b.css({transform:"translate(0, "+(h-200)+"px )",transform:"translateY("+(h-200)+"px )"})}c+a>e.top&&(f=.18*(e.top-c),200>=f&&g.css({transform:"translate(0, "+(f-200)+"px )",transform:"translateY("+(f-200)+"px)"}))}}}}})});